name: Vulnerability Scan

on:
  workflow_run:
    workflows: ["cicddocker"]

jobs:
  scan:
    name: Daily Vulnerability Scan
    runs-on: ubuntu-latest
    steps:
      - name: Pull docker image
        run: docker pull mohanraw/flask-app:latest

      - uses: dataswift/gha-trivy@v3.0.0
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          image: mohanraw/flask-app:latest
